
# Домашнее задание
**CRUD приложение с Web UI и хранением данных в БД**

## Цель:
Цель: разрабатывать полноценные классические Web-приложения

## Результат:
Web-приложение полностью на стеке Spring


### Задание:
Преобразовать консольное приложение каталога книг в библиотеке в веб-приложение с сохранением функциональности.  
Задание выполняется на базе предыдущей работы (**Spring Data JPA** или **Spring Data Mongo DB**).


## Требования к реализации:
- Реализовать CRUD операции для сущности книги, а так же отображения авторов, жанров и комментариев. Остальные операции с сущностями - по желанию/необходимости;
- Предусмотреть:
    - страницу со списком книг,
    - списком авторов,
    - списком жанров,
    - страницу создания/редактирования книги,
    - страницу просмотра книги со списком комментариев к ней;
- Удаление сущностей можно сделать:
    - на отдельной странице подтверждения удаления,
    - на странице редактирования,
    - или по кнопке из списка;
- Для удаления **НЕ должен использоваться HTTP-метод GET**;
- Из любого места приложения должна быть возможность вернуться на главную страницу (список книг);
- Выбор авторов и жанров при редактировании должен осуществляться из списков (`<select>`), ручного ввода id быть не должно;
- Использовать **View на Thymeleaf** и классические контроллеры (`@Controller`). Использование REST/Ajax данным заданием не предусматривается;
- Протестировать все эндпойнты контроллеров для CRUD операций над книгами с помощью `@WebMvcTest` и моков сервисов;
- Локализация интерфейса данным заданием не предусматривается, она строго опциональна;
- Без фанатизма :)


# Чеклист улучшений

___

## Сервисы (бизнес-логика)

* [ ] Унифицировать исключения: чётко разделить «валидация входа» (ошибка пользователя) vs «не найдено» (доменная ошибка) — чтобы в UI было простое отображение.
* [ ] Инварианта «у книги должен быть ≥1 жанр»: помимо проверки в сервисе, отразить валидацией формы (и при желании — доменными правилами).
* [ ] `deleteById` без проверки существования: продумать пользовательский фидбек (сообщение «уже удалено / не найдено») либо предварительную проверку.
* [ ] Нормализация входных строк: trim/проверка пустых значений для `title/fullName/name/text` до сохранения (исключить «пустые» записи).
* [ ] Сценарий массовых удалений: переоценить `ON DELETE CASCADE` у автора (сейчас удалит книги и комментарии; для учебной задачи норм, но рискованно для реального сценария).

## Схема/DDL

* [ ] Рассмотреть уникальные ограничения: `genres.name` (часто уникально), возможно `authors.full_name` (если доменная модель это допускает).
* [ ] Уточнить длины полей (`title`, `full_name`, `name`) — зафиксировать верхние границы в DDL и валидации.
* [ ] Пересмотреть тип времени: при необходимости перейти на `Instant/OffsetDateTime` для явной TZ-семантики (актуально за пределами учебного контура).

## Веб-уровень (вперед смотря)

* [ ] Подготовить сервисные фасады, возвращающие полностью инициализированные модели для Thymeleaf (из-за `open-in-view=false`).
* [ ] Централизованный обработчик ошибок (`ControllerAdvice`) для отображения `EntityNotFound` / валидационных ошибок человекочитаемо.
* [ ] Явные сообщения валидации для форм (обязательные поля, минимум/максимум длины, выбор жанров).

## Тестирование

* [ ] Набор тестов на сервисы: сценарии «не найдено», пустые жанры, обновление, удаление (поведение и исключения).
* [ ] @WebMvcTest (позже): проверить рендер страниц, валидацию, отображение ошибок, редиректы.
