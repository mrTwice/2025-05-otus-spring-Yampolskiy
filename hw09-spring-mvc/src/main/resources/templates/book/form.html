<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head><title th:text="${form.id} != null ? 'Редактирование книги' : 'Новая книга'">Книга</title></head>
<body>
<div th:replace="fragments/nav :: topnav"></div>

<h1 th:text="${form.id} != null ? 'Редактировать книгу' : 'Создать книгу'">Книга</h1>

<form th:action="${form.id} != null ? @{|/books/${form.id}|} : @{/books}" th:object="${form}" method="post">
    <input type="hidden" th:field="*{id}"/>
    <input type="hidden" th:field="*{version}"/>

    <div>
        <label>Название</label><br/>
        <input type="text" th:field="*{title}" maxlength="255"/>
        <div th:if="${#fields.hasErrors('title')}" th:errors="*{title}"></div>
    </div>

    <div>
        <label>Автор</label><br/>
        <select th:field="*{authorId}">
            <option value="" disabled selected>— выберите автора —</option>
            <option th:each="a : ${authors}" th:value="${a.id}" th:text="${a.fullName}"></option>
        </select>
        <div th:if="${#fields.hasErrors('authorId')}" th:errors="*{authorId}"></div>
    </div>

    <div>
        <label>Жанры</label><br/>
        <select multiple size="6" th:field="*{genresIds}">
            <option th:each="g : ${genres}" th:value="${g.id}" th:text="${g.name}"></option>
        </select>
        <div th:if="${#fields.hasErrors('genresIds')}" th:errors="*{genresIds}"></div>
    </div>

    <div style="margin-top:10px">
        <button type="submit">Сохранить</button>
        <a th:href="@{/books}">Отмена</a>
    </div>
</form>
</body>
</html>
